<main class="flex-1 flex items-start justify-center min-h-[calc(100vh-200px)] px-2 sm:px-4 py-6 sm:py-8">
  <div
    class="w-full max-w-full sm:max-w-5xl lg:max-w-7xl xl:max-w-screen-xl mx-auto
           bg-slate-900/70 backdrop-blur-md
           rounded-2xl shadow-xl border border-slate-700/70
           p-4 sm:p-6 md:p-10 text-white"
  >

    <!-- Header simple -->
    <header class="mb-8">
      <p class="text-xs uppercase tracking-widest text-slate-400 mb-2">
        Acceso
      </p>
      <h1 class="text-2xl sm:text-3xl font-extrabold tracking-tight">
        Iniciar sesión
      </h1>
      <p class="text-sm text-slate-300 mt-1 max-w-xl">
        Ingresá con tu email y contraseña.
      </p>
    </header>

    <!-- Card centrada -->
    <div class="flex justify-center">
      <div class="w-full max-w-md bg-slate-800/70 border border-slate-600/70 rounded-2xl p-6 sm:p-8 shadow-lg">

        <form action="/login" method="POST" class="space-y-5">

          <!-- Email -->
          <div class="space-y-1">
            <label for="email" class="block text-sm font-medium text-slate-300">
              Correo electrónico
            </label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="correo@ejemplo.com"
              required
              autocomplete="email"
              class="w-full px-4 py-3 rounded-xl
                     bg-slate-900 text-white placeholder-white/35
                     border border-slate-600
                     focus:outline-none focus:ring-2 focus:ring-sky-500/60
                     transition"
            />
          </div>

          <!-- Password -->
          <div class="space-y-1">
            <label for="password" class="block text-sm font-medium text-slate-300">
              Contraseña
            </label>

            <div class="relative">
              <input
                type="password"
                id="password"
                name="password"
                placeholder="••••••••"
                required
                autocomplete="current-password"
                class="w-full px-4 py-3 rounded-xl
                       bg-slate-900 text-white placeholder-white/35
                       border border-slate-600
                       focus:outline-none focus:ring-2 focus:ring-sky-500/60
                       transition pr-12"
              />

              <button
                type="button"
                id="togglePass"
                class="absolute right-2 top-1/2 -translate-y-1/2
                       rounded-lg px-2 py-2
                       text-slate-300 hover:text-white
                       hover:bg-slate-800/70 transition"
                aria-label="Mostrar u ocultar contraseña"
              >
                <svg id="eyeOpen" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none">
                  <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12Z" stroke="currentColor" stroke-width="1.6"/>
                  <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" stroke="currentColor" stroke-width="1.6"/>
                </svg>
                <svg id="eyeClosed" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" viewBox="0 0 24 24" fill="none">
                  <path d="M3 3l18 18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                  <path d="M10.6 10.6a2 2 0 0 0 2.8 2.8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                  <path d="M9.5 5.2A10.6 10.6 0 0 1 12 5c6.5 0 10 7 10 7a18.1 18.1 0 0 1-4 5.3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                  <path d="M6.2 6.2C3.5 8.7 2 12 2 12s3.5 7 10 7c1 0 1.9-.1 2.8-.4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- Botón -->
          <button
            type="submit"
            class="w-full bg-sky-600 hover:bg-sky-700 active:bg-sky-800
                   text-white font-semibold py-3 rounded-xl
                   shadow-md hover:shadow-lg transition"
          >
            Entrar
          </button>

          <!-- Links -->
          <div class="flex items-center justify-between text-sm text-slate-300">
            <a href="/registro" class="text-sky-300 hover:text-sky-200 underline underline-offset-4">
              Registrarme
            </a>
            <span class="text-slate-400">
              Soporte: admin
            </span>
          </div>

        </form>
      </div>
    </div>

  </div>
</main>

<!-- Errores: sin EJS dentro del JS -->
<div
  id="flashErroresLogin"
  data-errores="<%= (errores && errores.length) ? JSON.stringify(errores).replace(/</g,'\\u003c') : '[]' %>"
  class="hidden"
></div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const email = document.getElementById("email");
    const pass = document.getElementById("password");

    // placeholder on focus/blur
    [email, pass].forEach((input) => {
      if (!input) return;
      const ph = input.placeholder;
      input.addEventListener("focus", () => input.placeholder = "");
      input.addEventListener("blur", () => input.placeholder = ph);
    });

    // show/hide pass
    const btn = document.getElementById("togglePass");
    const eyeOpen = document.getElementById("eyeOpen");
    const eyeClosed = document.getElementById("eyeClosed");

    btn?.addEventListener("click", () => {
      const toText = pass.type === "password";
      pass.type = toText ? "text" : "password";
      eyeOpen.classList.toggle("hidden", toText);
      eyeClosed.classList.toggle("hidden", !toText);
    });

    // Swal errores
    const flash = document.getElementById("flashErroresLogin");
    let errs = [];
    try { errs = JSON.parse(flash?.dataset?.errores || "[]"); } catch { errs = []; }

    if (Array.isArray(errs) && errs.length > 0) {
      Swal.fire({
        toast: true,
        position: "top-end",
        icon: "error",
        title: String(errs[0]),
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        width: "clamp(300px, 92vw, 360px)"
      });
    }
  });
</script>
