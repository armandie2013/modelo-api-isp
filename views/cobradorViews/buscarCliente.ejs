<main class="flex-1 flex items-start justify-center min-h-[calc(100vh-200px)] px-2 sm:px-4 py-6 sm:py-8">
  <div
    class="w-full max-w-full sm:max-w-5xl lg:max-w-7xl xl:max-w-screen-xl mx-auto
           bg-slate-900/70 backdrop-blur-md
           rounded-2xl shadow-xl border border-slate-700/70
           p-4 sm:p-6 md:p-10 text-white"
  >

    <!-- Header -->
    <header class="mb-8">
      <p class="text-xs uppercase tracking-widest text-slate-400 mb-2">
        Cobros
      </p>
      <h1 class="text-2xl sm:text-3xl font-extrabold tracking-tight">
        Buscar cliente
      </h1>
      <p class="text-sm text-slate-300 mt-1 max-w-xl">
        Ingres√° el DNI del cliente para ver su estado, facturas y registrar cobros.
      </p>
    </header>

    <!-- Card principal -->
    <div class="flex justify-center">
      <div
        class="w-full max-w-md bg-slate-800/80
               border border-slate-600/70 rounded-2xl
               p-6 sm:p-8 shadow-lg"
      >

        <form action="/cobros/buscar-cliente" method="get" class="space-y-5">

          <div>
            <label for="dni" class="block text-sm font-medium text-slate-300 mb-1">
              DNI del cliente
            </label>

            <input
              type="text"
              id="dni"
              name="dni"
              required
              inputmode="numeric"
              placeholder="12345678"
              class="w-full px-4 py-3 rounded-xl
                     bg-slate-900 text-white
                     placeholder-white/40
                     border border-slate-600
                     focus:outline-none focus:ring-2 focus:ring-sky-500/60
                     text-center text-2xl tracking-wider transition"
            />
          </div>

          <button
            type="submit"
            class="w-full bg-sky-600 hover:bg-sky-700 active:bg-sky-800
                   text-white font-semibold py-3 rounded-xl
                   shadow-md hover:shadow-lg transition"
          >
            Buscar cliente
          </button>

        </form>

      </div>
    </div>

  </div>
</main>

<!-- Pasamos el error al front sin EJS dentro del JS -->
<div
  id="flashError"
  data-error="<%= (typeof error !== 'undefined' && error) ? String(error).replace(/"/g, '&quot;') : '' %>"
  class="hidden"
></div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const dniInput = document.getElementById("dni");
    const placeholderOriginal = dniInput.placeholder;

    dniInput.addEventListener("focus", () => dniInput.placeholder = "");
    dniInput.addEventListener("blur", () => dniInput.placeholder = placeholderOriginal);

    dniInput.addEventListener("input", function () {
      this.value = this.value.replace(/\D/g, "").slice(0, 8);
    });

    // Lee el error desde data-error (sin EJS dentro del script)
    const flash = document.getElementById("flashError");
    const err = flash?.dataset?.error?.trim();

    if (err) {
      Swal.fire({
        icon: "error",
        text: err,
        width: "clamp(320px, 92vw, 480px)",
        confirmButtonColor: "#0284c7",
        confirmButtonText: "Cerrar"
      });
    }
  });
</script>
