<div class="flex items-start justify-center min-h-[calc(100vh-200px)] px-2 sm:px-4 py-6 sm:py-8">
  <div
    class="w-full max-w-full sm:max-w-5xl lg:max-w-7xl xl:max-w-screen-xl mx-auto
           bg-gradient-to-br from-slate-900/95 via-slate-900/90 to-slate-950/95
           backdrop-blur-md rounded-2xl shadow-2xl border border-slate-700/80
           p-4 sm:p-6 md:p-10 text-white"
  >

    <!-- Encabezado -->
    <header class="mb-6 sm:mb-10">
      <p class="text-xs sm:text-sm uppercase tracking-[0.25em] text-slate-400 mb-2">
        Usuarios
      </p>
      <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3">
        <div>
          <h1 class="text-2xl sm:text-3xl md:text-4xl font-extrabold tracking-tight">
            Gestión de Usuarios
          </h1>
          <p class="text-sm sm:text-base text-slate-300 mt-1 max-w-2xl">
            Administrá los roles y cuentas de administradores, cobradores y clientes desde un solo lugar.
          </p>
        </div>
      </div>
    </header>

    <% const secciones = [
      { titulo: 'Listado Administradores', usuarios: admins, color: 'blue' },
      { titulo: 'Listado Cobradores', usuarios: cobradores, color: 'red' },
      { titulo: 'Listado Clientes', usuarios: clientes, color: 'green' }
    ]; %>

    <% secciones.forEach(seccion => { %>
      <section
        class="mb-8 sm:mb-10 rounded-xl border border-slate-700/80 bg-slate-900/60 shadow-md"
      >
        <!-- Header de sección -->
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 px-4 sm:px-5 pt-4 sm:pt-5 pb-3 border-b border-slate-700/70">
          <div class="flex items-center gap-2">
            <span class="inline-flex h-2.5 w-2.5 rounded-full bg-<%= seccion.color %>-400"></span>
            <h2 class="text-lg sm:text-xl font-semibold text-<%= seccion.color %>-300">
              <%= seccion.titulo %>
            </h2>
          </div>
          <div
            class="inline-flex items-center gap-2 rounded-full bg-slate-800/80 border border-slate-600/80
                   px-3 py-1 text-[11px] sm:text-xs text-slate-200"
          >
            <span class="uppercase tracking-wide text-slate-400">Totales</span>
            <span class="text-sm font-semibold text-<%= seccion.color %>-300">
              <%= seccion.usuarios.length %>
            </span>
          </div>
        </div>

        <!-- Contenido de sección -->
        <div class="px-3 sm:px-5 pb-4 sm:pb-5 pt-2">
          <% if (seccion.usuarios.length === 0) { %>
            <p class="text-slate-400 italic text-xs sm:text-sm py-3">
              No hay usuarios en esta categoría.
            </p>
          <% } else { %>
            <div class="overflow-x-auto rounded-md border border-slate-700/80 bg-slate-900/80">
              <table
                class="w-full min-w-[720px] text-xs sm:text-sm text-left border-collapse"
              >
                <thead
                  class="bg-slate-800/90 text-slate-200 text-[11px] sm:text-xs uppercase tracking-wide"
                >
                  <tr>
                    <th class="px-3 sm:px-4 py-2.5 sm:py-3 w-12">#</th>
                    <th class="px-3 sm:px-4 py-2.5 sm:py-3 w-32">Nombre</th>
                    <th class="px-3 sm:px-4 py-2.5 sm:py-3 w-32">Apellido</th>
                    <th class="px-3 sm:px-4 py-2.5 sm:py-3 w-64">Email</th>
                    <th class="px-3 sm:px-4 py-2.5 sm:py-3 w-32">DNI</th>
                    <th class="px-3 sm:px-4 py-2.5 sm:py-3 w-24">Rol</th>
                    <th class="px-3 sm:px-4 py-2.5 sm:py-3 w-40 text-center">Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <% seccion.usuarios.forEach((usuario, index) => { %>
                    <tr class="border-t border-slate-700 hover:bg-slate-800/80 transition-colors">
                      <td class="px-3 sm:px-4 py-2.5 sm:py-3 align-middle text-slate-300">
                        <%= index + 1 %>
                      </td>
                      <td class="px-3 sm:px-4 py-2.5 sm:py-3 align-middle truncate text-slate-100">
                        <%= usuario.nombre %>
                      </td>
                      <td class="px-3 sm:px-4 py-2.5 sm:py-3 align-middle truncate text-slate-100">
                        <%= usuario.apellido %>
                      </td>
                      <td class="px-3 sm:px-4 py-2.5 sm:py-3 align-middle truncate text-slate-200">
                        <%= usuario.email %>
                      </td>
                      <td class="px-3 sm:px-4 py-2.5 sm:py-3 align-middle text-slate-200">
                        <%= usuario.dni %>
                      </td>
                      <td class="px-3 sm:px-4 py-2.5 sm:py-3 align-middle">
                        <% if (usuario.rol === 'admin') { %>
                          <span
                            class="inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-medium
                                   bg-blue-500/15 text-blue-300 border border-blue-400/40"
                          >
                            Admin
                          </span>
                        <% } else if (usuario.rol === 'cobrador') { %>
                          <span
                            class="inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-medium
                                   bg-red-500/15 text-red-300 border border-red-400/40"
                          >
                            Cobrador
                          </span>
                        <% } else { %>
                          <span
                            class="inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-medium
                                   bg-green-500/15 text-green-300 border border-green-400/40"
                          >
                            Cliente
                          </span>
                        <% } %>
                      </td>
                      <td class="px-3 sm:px-4 py-2.5 sm:py-3 align-middle">
                        <div class="flex flex-wrap items-center justify-center gap-2">
                          <a
                            href="/usuarios/editar/<%= usuario._id %>"
                            class="inline-flex items-center px-3 py-1.5 rounded-full text-[11px] sm:text-xs
                                   font-medium border border-sky-400/60 text-sky-300 bg-sky-500/10
                                   hover:bg-sky-500/20 hover:border-sky-300 transition-colors"
                          >
                            Editar rol
                          </a>

                          <form
                            action="/usuarios/eliminar/<%= usuario._id %>"
                            method="POST"
                            class="inline"
                            onsubmit="return confirm('¿Eliminar este usuario?')"
                          >
                            <button
                              type="submit"
                              class="inline-flex items-center px-3 py-1.5 rounded-full text-[11px] sm:text-xs
                                     font-medium border border-rose-400/60 text-rose-300 bg-rose-500/10
                                     hover:bg-rose-500/20 hover:border-rose-300 transition-colors"
                            >
                              Eliminar
                            </button>
                          </form>
                        </div>
                      </td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>
          <% } %>
        </div>
      </section>
    <% }) %>

  </div>
</div>
